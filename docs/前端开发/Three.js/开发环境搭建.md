---
title: 开发环境搭建
date: 2022/08/31 09:18:42
tags:
- 2022/08/31 09:18:42
- three.js环境
- vite
---

# 开发环境搭建

使用`vite`作为构建工具

1. npm init
2. npm install vite -D
3. npm install three
4. 新建`src`存放js，css代码，创建`main.js`为`vite`入口文件，新建`index.html`引入`main.js`

```js
// main.js
// 引入THREE.js
import * as THREE from 'three'

console.log(THREE)
```

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>three.js study</title>
  </head>
  <body>
    hello,three.js!
  </body>
  <script type="module">
    // 引入main.js
    import './src/main.js'
  </script>
</html>

```



## 创建第一个场景

 一个场景能被渲染出来需要：场景、相机和渲染器

```js
import * as THREE from 'three'
// 1、创建场景
const scene = new THREE.Scene();

// 2、创建相机
const camera = new THREE.PerspectiveCamera(
    75,
    window.innerWidth / window.innerHeight,
    0.1,
    1000
);

// 设置相机位置
camera.position.set(0, 0, 10);
scene.add(camera);

// 添加物体
// 创建几何体
const cubeGeometry = new THREE.BoxGeometry(1, 1, 1);
const cubeMaterial = new THREE.MeshBasicMaterial({ color: 0xffff00 });
// 根据几何体和材质创建物体
const cube = new THREE.Mesh(cubeGeometry, cubeMaterial);
// 将几何体添加到场景中
scene.add(cube);

// 初始化渲染器
const renderer = new THREE.WebGLRenderer();
// 设置渲染的尺寸大小
renderer.setSize(window.innerWidth, window.innerHeight);

// 将webgl渲染的canvas内容添加到body
document.body.appendChild(renderer.domElement);

// 使用渲染器，通过相机将场景渲染进来
renderer.render(scene, camera);
```

## 透视相机（PerspectiveCamera）示意图

![透视相机示意图](https://zfh-oss.oss-cn-shanghai.aliyuncs.com/blog-images/%E9%80%8F%E8%A7%86%E7%9B%B8%E6%9C%BA%E7%A4%BA%E6%84%8F%E5%9B%BE.png) 

1. 摄像机视锥体垂直视野角度 也就是图中的**「a」**

2. 摄像机视锥体近端面 也就是图中的 **「near plane」**

3. 摄像机视锥体远端面 也就是图中的**「far plane」**

4. 摄像机视锥体长宽比 **「表示输出图像的宽和高之比」**

5. 对应的three 中的照相机：

6. ```js
   const camera = new THREE.PerspectiveCamera( 45, width / height, 1, 1000 );
   ```

## 轨道控制器查看物体

轨道控制器：`new OrbitControls( object : Camera, domElement : HTMLDOMElement )`

-  参数1:object: 将要被控制的相机
- 参数2:domElement: 用于事件监听的HTML元素

```js
import * as THREE from 'three'
import {OrbitControls} from 'three/examples/jsm/controls/OrbitControls.js'
// 1、创建场景
const scene = new THREE.Scene();

// 2、创建相机
const camera = new THREE.PerspectiveCamera(
    75,
    window.innerWidth / window.innerHeight,
    0.1,
    1000
);

// 设置相机位置
camera.position.set(0, 0, 10);
scene.add(camera);

// 添加物体
// 创建几何体
const cubeGeometry = new THREE.BoxGeometry(1, 1, 1);
const cubeMaterial = new THREE.MeshBasicMaterial({ color: 0xffff00 });
// 根据几何体和材质创建物体
const cube = new THREE.Mesh(cubeGeometry, cubeMaterial);
// 将几何体添加到场景中
scene.add(cube);

// 初始化渲染器
const renderer = new THREE.WebGLRenderer();
// 设置渲染的尺寸大小
renderer.setSize(window.innerWidth, window.innerHeight);
// console.log(renderer);

// 将webgl渲染的canvas内容添加到body
document.body.appendChild(renderer.domElement);

// 创建轨道控制器
const controls = new OrbitControls(camera, renderer.domElement);

function render() {
    renderer.render(scene, camera);
    //   渲染下一帧的时候就会调用render函数
    requestAnimationFrame(render);
}

render();
```

