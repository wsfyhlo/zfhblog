---
title: 前后端数据交互与HTTP协议
sidebar: auto
---

## 前后端数据交互

### 初始前后端通信

前后端通信方式什么？

前端和后端数据交互的过程<=>浏览器和服务器交互的过程

前端向后端发送数据：

1.登录功能

2.搜索功能

后端向前端发送数据：

页面上的图、文字等内容

### 前后端通信的过程与概念解释

1. 前后端通信的过程  
   前后端通信是在 `请求-响应` 中完成的

2. 概念解释

- 前端：`浏览器端`
- 客户端：只要能和通信的就叫`客户端`
- 后端：`服务器端`

### 前后端的通信方式

1. 使用浏览器访问网页

在浏览器地址栏输入网址，按下回车

2. Html 的标签

浏览器在解析 Html 标签的时候，遇到一些特殊的标签( `link` `img` `script` `iframe` )，会再次向服务器发送请求

还有一些标签(`a`,`from(表单)`)，浏览器解析的时候，不会向服务器发送请求，但是用户可以使用他们向服务器发送请求

3. Ajax Fetch

## 服务端职责

- 处理 `HTTP` 请求(`req`,`res`)
- 定义路由,供前端 `Ajax` 访问
- 使用数据库，存储和查询数据

## 服务端处理数据:路由

::: tip 路由和 URL 的关系

`GET /api/list 路由 ---> axios.get('api/list?a=1')`

**路由是规则，url 是具体的形式**两者不同

:::

路由是**服务端的入口规则**，也是与前端的“约定”

路由主要包含：

- 定义 `method`，如 `GET`,`POST` 等
- 定义 `url` 规则，如`/api/list` 和`/api/create`
- 定义输入`Request body`和输出`Response body`格式

## HTTP 协议

### 初识 HTTP

`http`协议规定了客户端和服务端如何通讯

- `url`：后端接口的地址，即前端 `Ajax` 请求时的地址
- `method`：请求方法，如 `GET` `POST` `PUT` `DELETE` 等
- 状态码：接口返回的状态，如 `200` `302` `404` `500` 等
- `Request`：请求
- `Request Body`：请求时发送给后端的数据
- `Request Content-type`：发送数据的格式，如 `json`
- `Response`：响应
- `Response Body`：后端返回给前端的数据
- `Response Content-type`：返回数据的格式，如 `json`

1. HTTP (`hypeText Transfer Protocol`:超文本传输协议)

`HTML`:超文本标记语言，超文本：原先一个个单一的文本，通过超链接将其联系起来。由原先的单一的文本变成了可无限伸、扩展的超級文本、立体文本

HTML、JS、CSS、图片、字体、音频、视频等等文件，都是通过`HTTP`在服务器和浏览器之间传输

每一次前后端通信，前端需要主动向后端发岀请求，后端接收到前端的请求后，可以给出响应

`HTTP`是一个请求-响应协议

2. HTTP 请求响应的过程

![HTTP请求响应的过程](https://zfh-nanjing-bucket.oss-cn-nanjing.aliyuncs.com/blog-images/HTTP%E8%AF%B7%E6%B1%82%E5%93%8D%E5%BA%94%E7%9A%84%E8%BF%87%E7%A8%8B.png)

- 浏览器地址栏输入 URL 并回车
- 浏览器查找当前 URL 是否存在缓存，并比较缓存是否过期
- DNS 解析 URL 对应的 IP
- 根据 IP 建立 TCP 连接（三次握手）
- 发送 http 请求
- 服务器处理请求，浏览器接受 HTTP 响应
- 浏览器解析并渲染页面
- 关闭 TCP 连接（四次挥手）

### http 报文

1. HTTP 报文是什么

- 浏览器向服务器发送请求的时候，请求本身就是信息，叫`请求报文`
- 服务器向浏览器发送响应时传输的信息，叫`响应报文`

2. HTTP 报文格式
   // TODO：复查 2022.3.22

- 请求

1. 请求头：起始行(黄色高亮部分)+首部（剩余部分为首部）

![起始行](https://zfh-nanjing-bucket.oss-cn-nanjing.aliyuncs.com/blog-images/%E8%B5%B7%E5%A7%8B%E8%A1%8C.png)

2. 请求体

GET 请求没有请求体，数据是通过请求头携带

POST 请求，有请求体，数据通过请求体携带

- 响应

1. 响应头：起始行+首部
2. 响应体

### HTTP 方法

1. 常用的 HTTP 方法

浏览器发送**请求**时采用的方法。和响应**无关**

`GET` `POST` `PUT` `DELETE`

用来定义对于资源采取什么样的操作的，有各自的语义

2. HTTP 方法的语义

- `GET` 获取数据 -`POST` 创建数据
- `PUT` 更新数据(修改个人信息 修改密码) -`DELETE` 删除数据

这些方法虽然有各自的语义，但是并不是强制性的

3.RESTful 接口设计

一种接口设计风格， 充分利用 HTTP 方法的语义

- 普通方法：

① 通过用户 ID 获取用户个人信息，使用 GET 方法`https://www.xxx.com/api/http/getUser?id=1`

② 注册新用户，使用 POST 方法`https://www.xxx.com/api/http/addUser`

③ 修改一个用户，使用 POST 方法`https://www.xxx.com/api/http/modifuUser`

③ 删除一个用户，使用 POST 方法 `https://www.xxx.com/api/http/deleteUser`

- RESTful 接口风格

只需要定义一个接口：`https://www.xxx.com/api/http/User`

分别通过四种语义的方法：GET(获取信息)、POST(注册用户)、PUT(修改信息)、DELETE(删除信息)

### GET 和 POST 方法的对比

1. 语义：`GET`：获取数据,`POST`:创建数据

2. 发送数据

GET 通过地址在请求头中携带数据,能携带的数据和地址的长度有关，一般最多就几 K

POST 既可以通过地址在请求头中携带数据，也可以通过请求体携带数据,能携带的数据理论上是无限量的

**_携带少量数据，可以使用 GET 请求。大量的数据可以使用 POST 请求_**

3. 缓存：Get 可以被缓存，post 不会被缓存

4. 安全性：**GET 和 POST 都不安全**

### HTTP 状态码

[HTTP 状态码](https://www.runoob.com/http/http-status-codes.html)

**_定义服务器对请求的处理结果，是服务器返回的_**

`100-199`=>**消息**:代表请求已经被接受，需要继续处理

`200-299`=>**成功**:200

`300-399`=>**重定向**:301`永久重定向`，除非用户手动清除缓存;302`临时重定向`,不会缓存;304`没有修改`,所请求的资源未修改，服务器返回此状态码时，不会返回任何资源。

`400-499`=>**请求错误**:404`Not Found(没有找到)`

`500-599`=>**服务器错误**:500`服务器内部错误，无法完成请求`
